var G=Object.defineProperty;var U=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var E=(e,t,l)=>t in e?G(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,R=(e,t)=>{for(var l in t||(t={}))X.call(t,l)&&E(e,l,t[l]);if(U)for(var l of U(t))Y.call(t,l)&&E(e,l,t[l]);return e};var N=(e,t,l)=>new Promise((r,p)=>{var c=u=>{try{n(l.next(u))}catch(v){p(v)}},o=u=>{try{n(l.throw(u))}catch(v){p(v)}},n=u=>u.done?r(u.value):Promise.resolve(u.value).then(c,o);n((l=l.apply(e,t)).next())});import{_ as D,a as Z}from"./ListView.e4532d11.js";import{_ as ee}from"./index.de2b8369.js";import{_ as I,r as k,o as h,d as g,f as i,g as m,n as z,t as V,u as L,v as F,x as te,y as $,z as le,A as S,w,C,E as se,F as B,G as O,H as oe,I as ae,J as ne,P as ie,K as re,L as de,M as ue,N as ce,O as j,Q as q,R as pe,S as me,T as he,U as A,h as H,D as fe,V as ve,W as _e,p as ye,i as ge}from"./vendor.ae1af255.js";import{_ as P,a as be}from"./FormControl.41ecd006.js";const we={name:"Toast",props:{position:{type:String,default:"top-center"},icon:{type:String},iconClasses:{type:String},title:{type:String},text:{type:String},timeout:{type:Number,default:5},zIndex:{type:Number,default:1e3}},emits:["close"],components:{FeatherIcon:ee},mounted(){this.timeout>0&&setTimeout(()=>{this.$emit("close")},this.timeout*1e3)}},xe={class:"flex items-start"},ke={key:0,class:"mr-3 grid h-5 w-5 place-items-center"},Se={key:1,class:"text-base text-gray-600"},Te={class:"ml-auto pl-2"};function Ce(e,t,l,r,p,c){const o=k("FeatherIcon");return h(),g("div",{class:"my-2 min-w-[15rem] max-w-[40rem] rounded-lg border bg-white p-4 shadow-md",style:te({zIndex:l.zIndex})},[i("div",xe,[l.icon?(h(),g("div",ke,[m(o,{name:l.icon,class:z(["h-5 w-5",l.iconClasses])},null,8,["name","class"])])):V("",!0),i("div",null,[L(e.$slots,"default",{},()=>[l.title?(h(),g("p",{key:0,class:z(["text-base font-medium text-gray-900",{"mb-1":l.text}])},F(l.title),3)):V("",!0),l.text?(h(),g("p",Se,F(l.text),1)):V("",!0)])]),i("div",Te,[L(e.$slots,"actions",{},()=>[i("button",{class:"grid h-5 w-5 place-items-center rounded hover:bg-gray-100",onClick:t[0]||(t[0]=n=>e.$emit("close"))},[m(o,{name:"x",class:"h-4 w-4 text-gray-700"})])])])])],4)}var Ve=I(we,[["render",Ce]]);const Le={},Fe={fill:"none",width:"16",height:"17",viewBox:"0 0 24 24",id:"filter","data-name":"Line Color",xmlns:"http://www.w3.org/2000/svg",class:"icon line-color"},$e=i("path",{id:"primary",d:"M5,4V6.64a1,1,0,0,0,.23.64l4.54,5.44a1,1,0,0,1,.23.64V21l4-2V13.36a1,1,0,0,1,.23-.64l4.54-5.44A1,1,0,0,0,19,6.64V4a1,1,0,0,0-1-1H6A1,1,0,0,0,5,4Z",style:{fill:"none",stroke:"rgb(0, 0, 0)","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"}},null,-1),Ne=[$e];function De(e,t){return h(),g("svg",Fe,Ne)}var Ie=I(Le,[["render",De]]);const je={__name:"NestedPopover",props:{placement:{type:String,default:"bottom-start"}},setup(e){const t=e,l=$(null),r=$(null);let p=$(null);function c(){p.value?p.value.update():p.value=de(l.value.el,r.value.el,{placement:t.placement})}function o(){re(()=>c())}return le(()=>{var n;(n=p.value)==null||n.destroy()}),(n,u)=>(h(),S(C(ie),null,{default:w(({open:v})=>[m(C(se),{as:"div",ref_key:"reference",ref:l,onClick:o,onFocusin:o,onKeydown:o},{default:w(({open:f})=>[L(n.$slots,"target",B(O({open:f})))]),_:2},1536),oe(i("div",null,[m(C(ae),{ref_key:"popover",ref:r,static:"",class:"z-[100]"},{default:w(({open:f,close:T})=>[L(n.$slots,"body",B(O({open:f,close:T})))]),_:2},1536)],512),[[ne,v]])]),_:3}))}},qe={__name:"SearchComplete",props:{value:{type:String,required:!1,default:""},doctype:{type:String,required:!0},searchField:{type:String,required:!1,default:"name"},labelField:{type:String,required:!1,default:"name"},valueField:{type:String,required:!1,default:"name"},pageLength:{type:Number,required:!1,default:10}},setup(e){const t=e;ue(()=>t.doctype,o=>{l.doctype=o,l.reload()});const l=ce({doctype:t.doctype,pageLength:t.pageLength,cache:["link_doctype",t.doctype],auto:!0,fields:[t.labelField,t.searchField,t.valueField],onSuccess:()=>{p.value=t.value?r.value.find(o=>o.value===t.value):null}}),r=j(()=>{var o;return((o=l.data)==null?void 0:o.map(n=>({label:n[t.labelField],value:n[t.valueField]})))||[]}),p=$(null);function c(o){l.update({filters:{[t.searchField]:["like",`%${o}%`]}}),l.reload()}return(o,n)=>(h(),S(C(q),{placeholder:"Select an option",options:r.value,value:p.value,"onUpdate:query":n[0]||(n[0]=u=>c(u)),onChange:n[1]||(n[1]=u=>p.value=u)},null,8,["options","value"]))}},Pe={class:"flex h-5 w-5 items-center justify-center rounded bg-gray-900 pt-[1px] text-2xs font-medium text-white"},Ue={class:"my-2 rounded-lg border border-gray-100 bg-white shadow-xl"},Ee={class:"min-w-[400px] p-2"},Re={class:"flex flex-1 items-center gap-2"},ze={class:"w-13 flex-shrink-0 pl-2 text-end text-base text-gray-600"},Be={id:"fieldname",class:"!min-w-[140px] flex-1 relative"},Oe={id:"operator",class:"!min-w-[140px] flex-shrink-0"},Ae={id:"value",class:"!min-w-[140px] flex-1"},He={class:"flex-shrink-0"},Me={key:1,class:"mb-3 flex h-7 items-center px-3 text-sm text-gray-600"},Je={class:"flex items-center justify-between gap-2"},Ke={__name:"ListFilter",props:{modelValue:{type:Object,default:()=>({})},docfields:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(e,{emit:t}){const l=["Check"],r=["Link"],p=["Float","Int"],c=["Select"],o=["Data","Long Text","Small Text","Text Editor","Text","JSON","Code"],n=t,u=e,v=j(()=>u.docfields.filter(s=>!s.is_virtual&&(l.includes(s.fieldtype)||r.includes(s.fieldtype)||p.includes(s.fieldtype)||c.includes(s.fieldtype)||o.includes(s.fieldtype))).map(s=>R({label:s.label,value:s.fieldname,description:s.fieldtype},s))),f=j({get:()=>T(u.modelValue),set:a=>n("update:modelValue",M(a))});function T(a){return Object.entries(a).map(([s,[b,d]])=>{const x=y(s);return{fieldname:s,operator:b,value:d,field:x}})}function y(a){return v.value.find(s=>s.fieldname===a)}function M(a){return a.reduce((s,b)=>{const{fieldname:d,operator:x,value:_}=b;return s[d]=[x,_],s},{})}function J(a){let s=[];return(o.includes(a)||r.includes(a))&&s.push({label:"Equals",value:"="},{label:"Not Equals",value:"!="},{label:"Like",value:"like"},{label:"Not Like",value:"not like"}),p.includes(a)&&s.push({label:"<",value:"<"},{label:">",value:">"},{label:"<=",value:"<="},{label:">=",value:">="},{label:"Equals",value:"="},{label:"Not Equals",value:"!="}),c.includes(a)&&s.push({label:"Equals",value:"="},{label:"Not Equals",value:"!="}),l.includes(a)&&s.push({label:"Equals",value:"="}),s}function K(a,s){if(c.includes(a)||l.includes(a)){const b=a=="Check"?["Yes","No"]:Q(s);return H(P,{type:"select",options:b})}else return H(P,{type:"text"})}function Q(a){return a.split(`
`)}function W(a){f.value=f.value.filter((s,b)=>b!==a)}return(a,s)=>(h(),S(je,null,{target:w(()=>[m(D,{label:"Filter",variant:"outline"},pe({prefix:w(()=>[m(Ie,{class:"h-4"})]),_:2},[f.value.length?{name:"suffix",fn:w(()=>[i("div",Pe,F(f.value.length),1)]),key:"0"}:void 0]),1024)]),body:w(({close:b})=>[i("div",Ue,[i("div",Ee,[f.value.length?(h(!0),g(A,{key:0},me(f.value,(d,x)=>(h(),g("div",{key:x,id:"filter-list",class:"mb-3 flex items-center justify-between gap-2"},[i("div",Re,[i("div",ze,F(x==0?"Where":"And"),1),i("div",Be,[m(C(q),{value:d.fieldname,options:v.value,onChange:_=>d.fieldname=_.value,placeholder:"Filter by..."},null,8,["value","options","onChange"])]),i("div",Oe,[m(P,{type:"select",modelValue:d.operator,"onUpdate:modelValue":_=>d.operator=_.value,options:J(d.field.fieldtype),placeholder:"Operator"},null,8,["modelValue","onUpdate:modelValue","options"])]),i("div",Ae,[r.includes(d.field.fieldtype)&&["=","!="].includes(d.operator)?(h(),S(qe,{key:0,doctype:d.field.options,value:d.value,onChange:_=>d.value=_.value,placeholder:"Value"},null,8,["doctype","value","onChange"])):(h(),S(he(K(d.field.fieldtype,d.field.options)),{key:1,modelValue:d.value,"onUpdate:modelValue":_=>d.value=_,placeholder:"Value"},null,8,["modelValue","onUpdate:modelValue"]))])]),i("div",He,[m(D,{variant:"ghost",icon:"x",onClick:_=>W(x)},null,8,["onClick"])])]))),128)):(h(),g("div",Me," Empty - Choose a field to filter by ")),i("div",Je,[f.value.length?(h(),S(D,{key:0,class:"!text-gray-600",variant:"ghost",label:"Clear all filter",onClick:s[0]||(s[0]=d=>f.value=[])})):V("",!0)])])])]),_:1}))}};const Qe={name:"Home",components:{ListView:Z,Dropdown:fe,Toast:Ve,TextInput:be,ListFilter:Ke,Autocomplete:q},data:()=>({searchTermName:"",searchTerm:"",filteredRows:[],lable:"",yourDocFields:[{label:"Name",value:"product_name",fieldname:"product_name",fieldtype:"Data"},{label:"Ten san pham",fieldname:"product_name",fieldtype:"Data"},{label:"Mo ta",fieldname:"product_description",fieldtype:"Data"},{label:"Loai san pham",fieldname:"category",fieldtype:"Data"}],modelValueFilter:{product_name:["like",""]},posToast:"top-center",typeToast:"",showToast:!1,titleToast:"alo 123",text:"",selectable:!0,showTooltip:!0,simple_columns:[{label:"M\xE3 s\u1EA3n ph\u1EA9m",key:"code",width:"10%"},{label:"T\xEAn s\u1EA3n ph\u1EA9m",key:"name",width:"20%"},{label:"M\xF4 t\u1EA3",key:"description",width:"35%"},{label:"Lo\u1EA1i s\u1EA3n ph\u1EA9m",key:"category",width:"20%"}],simple_rows:[]}),mounted(){return N(this,null,function*(){this.$resources.getListProduct.fetch()})},methods:{filterList(){this.searchTerm!==""?(this.filteredRows=this.simple_rows.filter(e=>e.code.toLowerCase().includes(this.searchTerm.toLowerCase())),this.isSearching=!0):this.isSearching=!1},filterListName(){this.searchTermName!==""?(this.filteredRows=this.simple_rows.filter(e=>e.name.toLowerCase().includes(this.searchTermName.toLowerCase())),this.isSearching=!0):this.isSearching=!1},getData(e){console.log(e)},deleteSelection(e){return N(this,null,function*(){let t=[...e];ve({url:"frappeui.api.deleteList",method:"POST",params:{items:JSON.stringify(t),doctype:"Product"},onSuccess(r){console.log(r),r.status=="error"?alert(r.message):alert("Delete succesfully")},onError(r){console.log(r)}}).reload()})},updateSelection(e){this.showToast=!0,setTimeout(()=>{this.showToast=!1},5e3)},hideToast(){this.showToast=!1},handleButtonClick(){this.$router.push("/new-product")},handleRowClick(e){console.log("Row clicked:",e)}},resources:{getListProduct(){return{url:"frappeui.api.get_product_list",params:{},onSuccess(e){for(let t=0;t<e.length;t++){let l={id:e[t].name,code:e[t].product_code,name:e[t].product_name,description:e[t].product_description,email:"john@doe.com",photo:"/files/img_4.jpg",status:"Active",role:"Developer",category:e[t].category};this.simple_rows.push(l)}}}}}},We=e=>(ye("data-v-48207579"),e=e(),ge(),e),Ge={style:{display:"flex","justify-content":"end",padding:"10px"}},Xe=We(()=>i("i",{class:"fa-solid fa-plus",style:{"font-size":"11px"}},null,-1)),Ye={style:{display:"flex","padding-bottom":"10px"}},Ze={style:{display:"flex","padding-right":"10px"}};function et(e,t,l,r,p,c){const o=k("Dropdown"),n=k("Button"),u=k("TextInput"),v=k("ListFilter"),f=k("ListView"),T=k("p-button");return h(),g(A,null,[i("div",Ge,[m(o,{options:[{label:"Th\xEAm s\u1EA3n ph\u1EA9m",value:"1"},{label:"X\xF3a s\u1EA3n ph\u1EA7m",value:"2"},{label:"In",value:"3"},{label:"Sao ch\xE9p",value:"4"}],button:{label:"..."},style:{"margin-right":"10px"}},null,8,["button"]),m(n,{class:"btn-save",onClick:c.handleButtonClick},{default:w(()=>[Xe,_e(" Th\xEAm s\u1EA3n ph\u1EA9m")]),_:1},8,["onClick"])]),i("div",Ye,[i("div",Ze,[m(u,{style:{"padding-right":"10px"},type:"text",size:"sm",variant:"outline",placeholder:"M\xE3 s\u1EA3n ph\u1EA9m",disabled:!1,modelValue:e.searchTerm,"onUpdate:modelValue":t[0]||(t[0]=y=>e.searchTerm=y),onInput:t[1]||(t[1]=y=>c.filterList(e.searchTerm))},null,8,["modelValue"]),m(u,{type:"text",size:"sm",variant:"outline",placeholder:"T\xEAn s\u1EA3n ph\u1EA9m",disabled:!1,modelValue:"","onUpdate:modelValue":t[2]||(t[2]=y=>e.searchTermName=y),onInput:t[3]||(t[3]=y=>c.filterListName(e.searchTermName))},null,8,["modelValue"])]),i("div",null,[m(v,{docfields:e.yourDocFields,modelValue:e.modelValueFilter,"onUpdate:modelValue":c.getData},null,8,["docfields","modelValue","onUpdate:modelValue"])])]),m(f,{class:"h-auto",columns:e.simple_columns,rows:e.isSearching?e.filteredRows:e.simple_rows,"onUpdate:selections":c.updateSelection,onDeleteSelection:c.deleteSelection,options:{getRowRoute:y=>({name:"product",params:{productId:y.id}}),selectable:e.selectable,showTooltip:e.showTooltip},"row-key":"id"},null,8,["columns","rows","onUpdate:selections","onDeleteSelection","options"]),m(T,{label:"Click me",onClick:e.handleClick},null,8,["onClick"])],64)}var nt=I(Qe,[["render",et],["__scopeId","data-v-48207579"]]);export{nt as default};
